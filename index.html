<!DOCTYPE html>
<head>
<title>一个简单画板</title>
<style>
* { margin: 0; padding: 0; }
canvas{
background:#eee;
}
#btn{
position:fixed;
left:0;
bottom:0;
}
</style>
<head>
<body>
<canvas id = 'board' width:100 heighr:100px>
</canvas>
	
<button id='btn'>橡皮</button>

<script type="text/javascript">
var eraser = false;
btn.onclick = function() {
  eraser = !eraser;
  //console.log(eraser);
}
var board = document.getElementById('board');
var context = board.getContext('2d');
var paintFlag = false;
canvasSize();
autoCanvasSize();
var lastPoint = {x:undefined,y:undefined};

board.onmousedown = function (event) {
  var x = event.clientX;
  var y = event.clientY;
  paintFlag = true;
  if(eraser){
    context.clearRect(x,y,4,4);
  }else{
    lastPoint = {x:x,y:y};
    } 
};
board.onmousemove = function (event) {
  //console.log(paintFlag);
  var x = event.clientX;
  var y = event.clientY;
  if(paintFlag){
  if(eraser){
    context.clearRect(x,y,4,4);
  }else{
      //console.log(x,y);
      var newPoint = {x:x,y:y};
      drawLine(lastPoint.x,lastPoint.y,x,y);
      lastPoint = newPoint;
      drawArc(x,y)
	}
  }
};
board.onmouseup = function() {
 paintFlag = false;
};
board.onmouseout = function() {
 paintFlag = false;
}
function canvasSize() {
  var x = document.documentElement.clientWidth;
  var y = document.documentElement.clientHeight;
  board.width = x;
  board.height = y;
};
function autoCanvasSize() {
  window.onresize = canvasSize;
};

function drawArc(x,y){
  context.beginPath();
  context.fillStyle= 'black';
  context.arc(x,y,1.5,0,Math.PI*2);
  context.fill();
  //console.log(x,y);
}
function drawLine(x1,y1,x2,y2) {
  context.beginPath();
  context.lineWidth = 4;
  context.moveTo(x1,y1);
  context.lineTo(x2,y2);
  context.stroke();
  context.closePath();
}
</script>
</body>
<html>
